### 演習 6 (Exercises 6)

#### タスク 6.1: 集団通信の最適化 (Collective Optimization)

データ転送を伴うほとんどの集団通信操作（Collective operations）は、`Send()` / `Recv()` の呼び出しによってシミュレート（模倣）することができます。例えば、`Bcast()` を呼び出す代わりに、`Send()` 関数を使って各プロセスに個別のメッセージを送ることができます（つまり、合計  個のプロセスがある場合、 個のメッセージを送る必要があります）。

どちらの解決策がより効率的でしょうか？また、それはなぜですか？

**ヒント:** あなたが `Bcast()` の作成者だと仮定してください。この関数をどのように実装しようと考えますか？  回の `Send()` 呼び出しよりも速くするにはどうすればよいでしょうか？

---

#### タスク 6.2: Skunk デバッガ (Skunk Debugger)

コード `ex06_skunkWithBugs.java` は、「Skunk」と呼ばれるパーティーゲームの MPI ベースのシミュレータを実装したものです。以下のコマンドでコンパイルできます：

`javac -cp .;%MPJ_HOME%/lib/mpj.jar ex06_skunkWithBugs.java`

そして、任意の数のプレイヤーで実行できます：

`# 3人のプレイヤーと1人のホストの場合`
`mpjrun -np 4 ex06_skunkWithBugs`

終了時、ホストは勝者とそのスコアをアナウンスしなければなりません：

`Winner: 3, Score: 17`

残念ながら、コードが正しく動作するのを妨げるバグが**少なくとも3つ**あります。これらのバグを修正してください！
途中の出力（printouts）はデバッグ用と見なして構いません。最終的に出力される行（勝者の行）のみを気にすれば大丈夫です。

---

#### タスク 6.3: 円周率を求める (Finding Pi)

円周率  の近似値（3.14159...）は、いわゆる「ダーツボード法（dartboard method）」を用いて実験的に求めることができます。

正方形の中に円を描くとします。ランダムに「ダーツ」を投げたとき、円の中に着地するダーツの数と、投げたダーツの総数の比率は、円の面積と正方形の面積の比率に近似します。これを利用して  を計算します。

**要件:**

* 新しい Java クラス `w06_findingPi` を作成してください。
* `MPI.COMM_WORLD.Rank()` と `Size()` を使用してください。
* 各プロセスが反復回数（）の一部（）を計算するようにしてください。
* `MPI.COMM_WORLD.Reduce` を使用して、ルートプロセスで結果を合計してください。

実行例：
`mpjrun -np 4 w06_findingPi 10000000 10000`
`Pi=3.1415376`

---

#### タスク 6.4: 3人対戦三目並べ (Three-Player Tic-Tac-Toe)

3人プレイヤーによる三目並べ（Tic-Tac-Toe）のシミュレーションを作成してください。このゲームは、古典的な三目並べを以下のルールで変更したものです：

1.  ではなく、 の盤面を使用します。
2. プレイヤーは3人です：「X」、「O」、「#」。
3. 勝利するには、シンボルを**一列に3つ**並べるだけで十分です（4つ並べても勝利となります）。

プログラムは以下のように構成してください：

* ランク(ID) 0 のプロセスは「ゲームホスト」です。ループ内で、現在のゲーム盤面の状態と、次の手を打つ要求を各プレイヤーに送信します。また、各ターン終了後の盤面の状態を表示します。ゲームが終了すると、ホストは各プレイヤーに特別なシャットダウン（終了）コマンドを送り、勝者を宣言します。
* その他のすべてのプロセスは「プレイヤー」です。プレイヤーのタスクは、ゲームホストから提供された状況において手を打つこと、および要求に応じてシャットダウンすることです。
* プレイ戦略はどのようなものでも構いません。ランダムに手を打つだけでも許容されます。